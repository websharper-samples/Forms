function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU;a=self;b=a.Samples=a.Samples||{};c=b.PersonPets=b.PersonPets||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=c.Person=c.Person||{};g=d.Forms=d.Forms||{};h=g.Form=g.Form||{};i=d.JavaScript=d.JavaScript||{};j=i.JS=i.JS||{};k=d.Seq=d.Seq||{};l=c.Pet=c.Pet||{};m=d.Strings=d.Strings||{};n=g.Pervasives=g.Pervasives||{};o=g.Validation=g.Validation||{};p=c.Species=c.Species||{};q=d.Enumerator=d.Enumerator||{};r=d.Obj=d.Obj||{};s=q.T=q.T||{};t=d.UI=d.UI||{};u=t.Doc=t.Doc||{};v=t.View=t.View||{};w=t.HtmlModule=t.HtmlModule||{};x=w.attr=w.attr||{};y=g.View=g.View||{};z=t.Submitter=t.Submitter||{};A=h.Many=h.Many||{};B=A.Collection=A.Collection||{};C=g.Doc=g.Doc||{};D=A.ItemOperations=A.ItemOperations||{};E=A.CollectionWithDefault=A.CollectionWithDefault||{};F=t.Client=t.Client||{};G=F.Templates=F.Templates||{};H=i.Pervasives=i.Pervasives||{};I=g.Fresh=g.Fresh||{};J=t.Var$1=t.Var$1||{};K=d.List=d.List||{};L=K.T=K.T||{};M=g.Result=g.Result||{};N=d.Arrays=d.Arrays||{};O=d.Unchecked=d.Unchecked||{};P=t.Snap=t.Snap||{};Q=t.AttrProxy=t.AttrProxy||{};R=g.ErrorMessage=g.ErrorMessage||{};S=t.Var=t.Var||{};T=g.Attr=g.Attr||{};U=a.EventTarget;V=a.Node;W=d.Collections=d.Collections||{};X=W.Dictionary=W.Dictionary||{};Y=t.DomUtility=t.DomUtility||{};Z=t.ConcreteVar=t.ConcreteVar||{};_0=t.Docs=t.Docs||{};_1=t.Attrs=t.Attrs||{};_2=t.AttrModule=t.AttrModule||{};_3=t.Array=t.Array||{};_4=W.List=W.List||{};_5=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_6=W.HashSet=W.HashSet||{};_7=a.WindowOrWorkerGlobalScope;_8=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_9=a.StartupCode$WebSharper_Forms$Forms=a.StartupCode$WebSharper_Forms$Forms||{};_=t.Abbrev=t.Abbrev||{};$=_.Fresh=_.Fresh||{};ba=t.DocElemNode=t.DocElemNode||{};bb=a.CharacterData;bc=a.Object;bd=t.Elt=t.Elt||{};be=W.DictionaryUtil=W.DictionaryUtil||{};bf=G.Prepare=G.Prepare||{};bg=d.Slice=d.Slice||{};bh=W.KeyCollection=W.KeyCollection||{};bi=t.An=t.An||{};bj=F.Settings=F.Settings||{};bk=_.Mailbox=_.Mailbox||{};bl=A.Fresh=A.Fresh||{};bm=F.Attrs=F.Attrs||{};bn=bm.Dyn=bm.Dyn||{};bo=t.Updates=t.Updates||{};bp=F.Docs=F.Docs||{};bq=bp.RunState=bp.RunState||{};br=bp.NodeSet=bp.NodeSet||{};bs=t.Anims=t.Anims||{};bt=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bu=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bv=d.Queue=d.Queue||{};bw=t.DynamicAttrNode=t.DynamicAttrNode||{};bx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};by=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bz=d.Concurrency=d.Concurrency||{};bA=t.AppendList=t.AppendList||{};bB=W.HashSetUtil=W.HashSetUtil||{};bC=t.Easing=t.Easing||{};bD=bz.AsyncBody=bz.AsyncBody||{};bE=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bF=bz.CT=bz.CT||{};bG=_.HashSet=_.HashSet||{};bH=bz.Scheduler=bz.Scheduler||{};bI=d.CancellationTokenSource=d.CancellationTokenSource||{};bJ=bp.DomNodes=bp.DomNodes||{};bK=a.Error;bL=d.OperationCanceledException=d.OperationCanceledException||{};bM=d.Lazy=d.Lazy||{};bN=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bO=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bP=bO.LazyRecord=bO.LazyRecord||{};bQ=a.IntelliFactory;bR=bQ&&bQ.Runtime;bS=a.console;bT=a.jQuery;bU=a.Date;c.FinalForm=function(){var bV;bV=h.Render(bR.Curried(c.RenderPerson,4),h.Run(function(bW){a.alert("Welcome to you "+bW.firstName+" "+bW.lastName+m.concat("",k.map(function(bX){return", your "+a.String(bX.species)+" "+bX.name;},bW.pets))+"!");},c.PersonPiglet(f.New("","",[]))));G.LoadLocalTemplates("");u.RunById("main",bV);};c.PersonPiglet=function(bV){return h.WithSubmit(n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(h.Return(bR.Curried3(f.New)),o.IsNotEmpty("Please enter your first name.",h.Yield(bV.firstName))),o.IsNotEmpty("Please enter your last name.",h.Yield(bV.lastName))),h.Many$1(bV.pets,l.New(p.Cat,""),c.PetPiglet)));};c.RenderPerson=function(bV,bW,bX,bY){return u.Element("section",[Q.Create("class","section")],[u.Element("h2",[Q.Create("class","subtitle")],[u.TextNode("You")]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.TextNode("First name: "),u.Input([Q.Create("class","input")],bV)]),c.ShowErrorsFor(y.Through$1(bY.view,bV))]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.TextNode("Last name: "),u.Input([Q.Create("class","input")],bW)]),c.ShowErrorsFor(y.Through$1(bY.view,bW))]),u.Element("h2",[Q.Create("class","subtitle")],[u.TextNode("Your pets")]),u.Element("div",[],[bX.Render(bR.Curried3(function(bZ,b0,b1){return u.Element("div",[Q.Create("class","field is-horizontal")],[u.Element("div",[Q.Create("class","field-body")],[c.RenderPet(b0,b1),C.ButtonValidate("Move up",[Q.Create("class","button")],bZ.moveUp),C.ButtonValidate("Move down",[Q.Create("class","button")],bZ.moveDown),u.Button("Delete",[Q.Create("class","button")],function(){bZ["delete"]();}),c.ShowErrorsFor(y.Through$1(bY.view,b1))])]);})),u.Button("Add a pet",[Q.Create("class","button")],function(){bX.AddOne();})]),u.Element("div",[],[u.Button("Submit",[Q.Create("class","button")],function(){bY.Trigger();})])]);};c.PetPiglet=function(bV){return n.op_LessMultiplyGreater(n.op_LessMultiplyGreater(h.Return(function(bW){return function(bX){return l.New(bW,bX);};}),h.Yield(bV.species)),o.IsNotEmpty("Please enter your pet's name.",h.Yield(bV.name)));};c.ShowErrorsFor=function(bV){return u.EmbedView(v.Map(function(bW){var bX;return bW.$==1?(bX=bW.$0,u.Concat(K.ofSeq(k.delay(function(){return k.map(function(bY){return u.Element("b",[Q.Create("style","color:red")],[u.TextNode(bY.message)]);},bX);})))):u.get_Empty();},bV));};c.RenderPet=function(bV,bW){return u.Concat([u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Cat,bV),u.TextNode(a.String(p.Cat))])]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Dog,bV),u.TextNode(a.String(p.Dog))])]),u.Element("div",[Q.Create("class","field")],[u.Element("label",[Q.Create("class","label")],[u.Radio([],p.Piglet,bV),u.TextNode(a.String(p.Piglet))])]),u.Element("div",[Q.Create("class","field")],[u.Input([Q.Create("class","input")],bW)])]);};e.FailWith=function(bV){throw new bK(bV);};e.KeyValue=function(bV){return[bV.K,bV.V];};f.New=function(bV,bW,bX){return{firstName:bV,lastName:bW,pets:bX};};h.Run=function(bV,bW){return h.Map(function(bX){bV(bX);return bX;},bW);};h.Render=function(bV,bW){var bX;bX=bW.render(bV);return u.Append(u.EmbedView(v.Map(function(){return u.get_Empty();},bW.view)),bX);};h.Return=function(bV){return h.New(I.Id(),v.Const({$:0,$0:bV}),a.id);};h.Yield=function(bV){return h.YieldVar(J.Create$1(bV));};h.Many$1=function(bV,bW,bX){var bY;bY=new E.New(bX,bV,bX(bW),bW);return h.New(I.Id(),bY.out,function(bZ){return bZ(bY);});};h.WithSubmit=function(bV){var bW;bW=new z.New(bV.view,{$:1,$0:L.Empty});return h.New(I.Id(),bW.view,function(bX){return(bV.render(bX))(bW);});};h.Map=function(bV,bW){return h.MapResult(function(bX){return M.Map(bV,bX);},bW);};h.Apply=function(bV,bW){var bX,bY;return h.New(I.Id(),v.Map2(M.Apply,bV.view,bW.view),(bX=bV.render,(bY=bW.render,function(bZ){return bY(bX(bZ));})));};h.YieldVar=function(bV){return h.New(bV.get_Id(),v.Map(function(bW){return{$:0,$0:bW};},bV.get_View()),function(bW){return bW(bV);});};h.MapResult=function(bV,bW){return h.New(bW.id,v.Map(bV,bW.view),bW.render);};j.GetFieldValues=function(bV){var bW,bX;bW=[];for(var bY in bV)bW.push(bV[bY]);return bW;};k.map=function(bV,bW){return{GetEnumerator:function(){var bX;bX=q.Get(bW);return new s.New(null,null,function(bY){return bX.MoveNext()&&(bY.c=bV(bX.Current()),true);},function(){bX.Dispose();});}};};k.delay=function(bV){return{GetEnumerator:function(){return q.Get(bV());}};};k.append=function(bV,bW){return{GetEnumerator:function(){var bX,bY;bX=q.Get(bV);bY=[true];return new s.New(bX,null,function(bZ){var b0;return bZ.s.MoveNext()?(bZ.c=bZ.s.Current(),true):(b0=bZ.s,!O.Equals(b0,null)?b0.Dispose():void 0,bZ.s=null,bY[0]&&(bY[0]=false,bZ.s=q.Get(bW),bZ.s.MoveNext()?(bZ.c=bZ.s.Current(),true):(bZ.s.Dispose(),bZ.s=null,false)));},function(bZ){var b0;b0=bZ.s;!O.Equals(b0,null)?b0.Dispose():void 0;});}};};k.filter=function(bV,bW){return{GetEnumerator:function(){var bX;bX=q.Get(bW);return new s.New(null,null,function(bY){var bZ,b0,b1;bZ=bX.MoveNext();b0=bX.Current();b1=false;while(bZ)if(bV(b0)){bY.c=b0;b1=true;bZ=false;}else if(bX.MoveNext())b0=bX.Current();else bZ=false;return b1;},function(){bX.Dispose();});}};};k.head=function(bV){var bW;bW=q.Get(bV);try{return bW.MoveNext()?bW.Current():k.insufficient();}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};k.iter=function(bV,bW){var bX;bX=q.Get(bW);try{while(bX.MoveNext())bV(bX.Current());}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};k.findIndex=function(bV,bW){var bX;bX=k.tryFindIndex(bV,bW);return bX==null?e.FailWith("KeyNotFoundException"):bX.$0;};k.fold=function(bV,bW,bX){var bY,bZ;bY=bW;bZ=q.Get(bX);try{while(bZ.MoveNext())bY=bV(bY,bZ.Current());return bY;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};k.tryFindIndex=function(bV,bW){var bX,bY,bZ;bX=q.Get(bW);try{bY=true;bZ=0;while(bY&&bX.MoveNext())if(bV(bX.Current()))bY=false;else bZ=bZ+1;return bY?null:{$:1,$0:bZ};}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};k.max=function(bV){var bW,bX,bY;bW=q.Get(bV);try{if(!bW.MoveNext())k.seqEmpty();bX=bW.Current();while(bW.MoveNext()){bY=bW.Current();O.Compare(bY,bX)===1?bX=bY:void 0;}return bX;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};k.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};l.New=function(bV,bW){return{species:bV,name:bW};};m.concat=function(bV,bW){return N.ofSeq(bW).join(bV);};m.SplitChars=function(bV,bW,bX){return m.Split(bV,new a.RegExp("["+m.RegexEscape(bW.join(""))+"]"),bX);};m.StartsWith=function(bV,bW){return bV.substring(0,bW.length)==bW;};m.Split=function(bV,bW,bX){return bX===1?N.filter(function(bY){return bY!=="";},m.SplitWith(bV,bW)):m.SplitWith(bV,bW);};m.RegexEscape=function(bV){return bV.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};m.SplitWith=function(bV,bW){return bV.split(bW);};n.op_LessMultiplyGreater=function(bV,bW){return h.Apply(bV,bW);};o.IsNotEmpty=function(bV,bW){return o.Is(function(bX){return bX!=="";},bV,bW);};o.Is=function(bV,bW,bX){return h.MapResult(function(bY){return bY.$==1?bY:bV(bY.$0)?bY:{$:1,$0:K.ofArray([new R.New(bX.id,bW)])};},bX);};p=c.Species=bR.Class({toString:function(){return this.$==1?"dog":this.$==2?"piglet":"cat";}},null,p);p.Cat=new p({$:0});p.Dog=new p({$:1});p.Piglet=new p({$:2});q.Get=function(bV){return bV instanceof a.Array?q.ArrayEnumerator(bV):O.Equals(typeof bV,"string")?q.StringEnumerator(bV):bV.GetEnumerator();};q.ArrayEnumerator=function(bV){return new s.New(0,null,function(bW){var bX;bX=bW.s;return bX<N.length(bV)&&(bW.c=N.get(bV,bX),bW.s=bX+1,true);},void 0);};q.StringEnumerator=function(bV){return new s.New(0,null,function(bW){var bX;bX=bW.s;return bX<bV.length&&(bW.c=bV[bX],bW.s=bX+1,true);},void 0);};q.Get0=function(bV){return bV instanceof a.Array?q.ArrayEnumerator(bV):O.Equals(typeof bV,"string")?q.StringEnumerator(bV):"GetEnumerator0"in bV?bV.GetEnumerator0():bV.GetEnumerator();};r=d.Obj=bR.Class({Equals:function(bV){return this===bV;},GetHashCode:function(){return -1;}},null,r);r.New=bR.Ctor(function(){},r);s=q.T=bR.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},r,s);s.New=bR.Ctor(function(bV,bW,bX,bY){r.New.call(this);this.s=bV;this.c=bW;this.n=bX;this.d=bY;},s);h.New=function(bV,bW,bX){return{id:bV,view:bW,render:bX};};u=t.Doc=bR.Class({},r,u);u.Append=function(bV,bW){return u.Mk({$:0,$0:bV.docNode,$1:bW.docNode},v.Map2Unit(bV.updates,bW.updates));};u.get_Empty=function(){return u.Mk(null,v.Const());};u.RunById=function(bV,bW){var bX;bX=Y.Doc().getElementById(bV);O.Equals(bX,null)?e.FailWith("invalid id: "+bV):u.Run(bX,bW);};u.Mk=function(bV,bW){return new u.New(bV,bW);};u.EmbedView=function(bV){var bW;bW=_0.CreateEmbedNode();return u.Mk({$:2,$0:bW},v.Map(a.ignore,v.Bind(function(bX){_0.UpdateEmbedNode(bW,bX.docNode);return bX.updates;},bV)));};u.TextNode=function(bV){return u.Mk({$:5,$0:Y.CreateText(bV)},v.Const());};u.Input=function(bV,bW){return u.InputInternal("input",function(){return k.append(bV,[_2.Value(bW)]);});};u.Concat=function(bV){var bW;bW=_3.ofSeqNonCopying(bV);return _3.TreeReduce(u.get_Empty(),u.Append,bW);};u.Button=function(bV,bW,bX){var bY;bY=Q.Concat(bW);return bd.New(u.Clickable("button",bX),bY,u.TextNode(bV));};u.Run=function(bV,bW){_0.LinkElement(bV,bW.docNode);u.RunInPlace(false,bV,bW);};u.Element=function(bV,bW,bX){var bY,bZ;bY=Q.Concat(bW);bZ=u.Concat(bX);return bd.New(Y.CreateElement(bV),bY,bZ);};u.InputInternal=function(bV,bW){var bX;bX=Y.CreateElement(bV);return bd.New(bX,Q.Concat(bW(bX)),u.get_Empty());};u.ConvertBy=function(bV,bW,bX){return u.Flatten(v.MapSeqCachedBy(bV,bW,bX));};u.Radio=function(bV,bW,bX){var bY,bZ;bY=Y.CreateElement("input");bY.addEventListener("click",function(){return bX.Set(bW);},false);bZ=_2.DynamicProp("checked",v.Map(function(b0){return O.Equals(b0,bW);},bX.get_View()));return bd.New(bY,Q.Concat(K.append(K.ofArray([Q.Create("type","radio"),Q.Create("name",bX.get_Id()),bZ]),K.ofSeq(bV))),u.get_Empty());};u.Clickable=function(bV,bW){var bX;bX=Y.CreateElement(bV);bX.addEventListener("click",function(bY){bY.preventDefault();return bW();},false);return bX;};u.RunInPlace=function(bV,bW,bX){var bY;bY=_0.CreateRunState(bW,bX.docNode);v.Sink(bi.get_UseAnimations()||bj.BatchUpdatesEnabled()?bk.StartProcessor(_0.PerformAnimatedUpdate(bV,bY,bX.docNode)):function(){_0.PerformSyncUpdate(bV,bY,bX.docNode);},bX.updates);};u.Flatten=function(bV){return u.EmbedView(v.Map(u.Concat,bV));};u.New=bR.Ctor(function(bV,bW){r.New.call(this);this.docNode=bV;this.updates=bW;},u);v.Map=function(bV,bW){return v.CreateLazy(function(){return P.Map(bV,bW());});};v.Const=function(bV){var bW;bW=P.New({$:0,$0:bV});return function(){return bW;};};v.Map2Unit=function(bV,bW){return v.CreateLazy(function(){return P.Map2Unit(bV(),bW());});};v.CreateLazy=function(bV){var bW;bW={c:null,o:bV};return function(){var bX,bY;bX=bW.c;return bX===null?(bX=bW.o(),bW.c=bX,(bY=bX.s,bY!=null&&bY.$==0)?bW.o=null:P.WhenObsoleteRun(bX,function(){bW.c=null;}),bX):bX;};};v.Map2=function(bV,bW,bX){return v.CreateLazy(function(){return P.Map2(bV,bW(),bX());});};v.Bind=function(bV,bW){return v.Join(v.Map(bV,bW));};v.SnapshotOn=function(bV,bW,bX){var bY;bY=P.New({$:2,$0:bV,$1:[]});return v.CreateLazy(function(){return bY.s==null?P.SnapshotOn(bW(),bX()):(P.WhenObsolete(bW(),bY),bY);});};v.Join=function(bV){return v.CreateLazy(function(){return P.Join(bV());});};v.MapSeqCachedBy=function(bV,bW,bX){var bY;bY=[new X.New$5()];return v.Map(function(bZ){var b0,b1,b2;b0=bY[0];b1=new X.New$5();b2=_3.mapInPlace(function(b3){var b4,b5;b4=bV(b3);b5=b0.ContainsKey(b4)?b0.get_Item(b4):bW(b3);b1.set_Item(b4,b5);return b5;},N.ofSeq(bZ));bY[0]=b1;return b2;},bX);};v.Sink=function(bV,bW){function bX(){P.WhenRun(bW(),bV,function(){bz.scheduler().Fork(bX);});}bz.scheduler().Fork(bX);};x=w.attr=bR.Class({},r,x);y.Through$1=function(bV,bW){return v.Map(function(bX){return bX.$==1?{$:1,$0:K.filter(function(bY){return bY.id===bW.get_Id();},bX.$0)}:bX;},bV);};z=t.Submitter=bR.Class({Trigger:function(){this["var"].Set(null);}},r,z);z.New=bR.Ctor(function(bV,bW){r.New.call(this);this.input=bV;this["var"]=J.Create();this.view=v.SnapshotOn(bW,this["var"].get_View(),this.input);},z);B=A.Collection=bR.Class({Render:function(bV){function bW(bY,bZ,b0){return b0;}function bX(bY,bZ,b0){return bY.render(bV(bZ));}return u.ConvertBy(function(bY){return bW(bY[0],bY[1],bY[2]);},function(bY){return bX(bY[0],bY[1],bY[2]);},this.changesView);},add:function(bV){this.arr.push(this.mk(bV));J.Update(this["var"],a.id);},mk:function(bV){var bW,bX,bY,bZ,b0,b1,b2,b3,b4;function b5(b6,b7,b8){return bX===b8;}bW=this;bX=(bl.Int())();bY=function(b6){return k.findIndex(function(b7){return b5(b7[0],b7[1],b7[2]);},b6);};bZ=v.Map(bY,this["var"].get_View());b0=new z.New(v.Map(function(b6){return b6===0?{$:1,$0:L.Empty}:{$:0,$0:true};},bZ),N.length(this.arr)===0?{$:1,$0:L.Empty}:{$:0,$0:false});b1=v.Map(function(b6){var b7;if(b6.$==0)if(b6.$0){b7=bY(bW.arr);A["List`1.Swap"](bW.arr,b7,b7-1);J.Update(bW["var"],a.id);}},b0.view);b2=new z.New(v.Map(function(b6){return b6===N.length(bW.arr)-1?{$:1,$0:L.Empty}:{$:0,$0:true};},bZ),{$:1,$0:L.Empty});b3=v.Map(function(b6){var b7;if(b6.$==0)if(b6.$0){b7=bY(bW.arr);A["List`1.Swap"](bW.arr,b7,b7+1);J.Update(bW["var"],a.id);}},b2.view);b4=this.p(bV);return[h.New(b4.id,v.Map2(a.id,b4.view,v.Map2(function(){return null;},b1,b3)),b4.render),new D.New(function(){var b6,b7;b6=bW.arr;b7=bY(bW.arr);b6.splice.apply(b6,[b7,1]);J.Update(bW["var"],a.id);},b0,b2),bX];},fst3:a.id},r,B);B.New=bR.Ctor(function(bV,bW,bX){var bY,bZ,b0;function b1(b2){return bY.mk(b2);}bY=this;r.New.call(this);this.p=bV;this.adder=bX;this.arr=[];this["var"]=J.Create$1(this.arr);k.iter((bZ=(b0=this.arr,function(b2){b0.push(b2);}),function(b2){return bZ(b1(b2));}),bW);this.changesView=v.Bind(function(b2){var b3;b3=b2.slice();return _3.MapTreeReduce(function(b4){return v.Map(function(){return[b4];},bY.fst3(b4[0],b4[1],b4[2]).view);},v.Const([]),function(b4,b5){return v.Map2(k.append,b4,b5);},b3);},this["var"].get_View());this.out=v.Bind(function(b2){var b3,b4,b5;function b6(b8,b9,b_){function b$(ca){return[ca];}return v.Map(function(ca){return M.Map(b$,ca);},b8.view);}function b7(b8,b9){return M.Append(k.append,b8,b9);}b3=b2.slice();b4=v.Const({$:0,$0:[]});b5=(bR.Curried3(v.Map2))(b7);return _3.MapTreeReduce(function(b8){return b6(b8[0],b8[1],b8[2]);},b4,function(b8,b9){return(b5(b8))(b9);},b3);},this["var"].get_View());},B);C.ButtonValidate=function(bV,bW,bX){return u.Element("button",k.append([T.SubmitterValidate(bX)],bW),[u.TextNode(bV)]);};D=A.ItemOperations=bR.Class({},r,D);D.New=bR.Ctor(function(bV,bW,bX){r.New.call(this);this["delete"]=bV;this.moveUp=bW;this.moveDown=bX;},D);E=A.CollectionWithDefault=bR.Class({AddOne:function(){this.add(this["default"]);}},B,E);E.New=bR.Ctor(function(bV,bW,bX,bY){B.New.call(this,bV,bW,bX);this["default"]=bY;},E);G.LoadLocalTemplates=function(bV){!G.LocalTemplatesLoaded()?(G.set_LocalTemplatesLoaded(true),G.LoadNestedTemplates(self.document.body,"")):void 0;G.LoadedTemplates().set_Item(bV,G.LoadedTemplateFile(""));};G.LocalTemplatesLoaded=function(){_5.$cctor();return _5.LocalTemplatesLoaded;};G.set_LocalTemplatesLoaded=function(bV){_5.$cctor();_5.LocalTemplatesLoaded=bV;};G.LoadNestedTemplates=function(bV,bW){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;function bX(ca){var cb,cc;if(!bY.ContainsKey(ca)){cb=(cc=null,[bZ.TryGetValue(ca,{get:function(){return cc;},set:function(cd){cc=cd;}}),cc]);cb[0]?(b$.Add(ca),bZ.Remove(ca),G.PrepareTemplateStrict(bW,{$:1,$0:ca},cb[1][0],{$:1,$0:cb[1][1]},{$:1,$0:bX})):bS.warn(b$.Contains(ca)?"Encountered loop when instantiating "+ca:"Local template does not exist: "+ca);}}bY=G.LoadedTemplateFile(bW);bZ=new X.New$5();b0=bV.querySelectorAll("[ws-template]");for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=b0[b1];b4=b3.getAttribute("ws-template").toLowerCase();b3.removeAttribute("ws-template");bZ.set_Item(b4,[[b3],G.FakeRootSingle(b3)]);}b5=bV.querySelectorAll("[ws-children-template]");for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5[b6];b9=b8.getAttribute("ws-children-template").toLowerCase();b8.removeAttribute("ws-children-template");bZ.set_Item(b9,(b_=Y.ChildrenArray(b8),[b_,G.FakeRoot(b_)]));}b$=new _6.New$3();while(bZ.count>0)bX(k.head(bZ.get_Keys()));};G.LoadedTemplates=function(){_5.$cctor();return _5.LoadedTemplates;};G.LoadedTemplateFile=function(bV){var bW,bX,bY;bW=(bX=null,[G.LoadedTemplates().TryGetValue(bV,{get:function(){return bX;},set:function(bZ){bX=bZ;}}),bX]);return bW[0]?bW[1]:(bY=new X.New$5(),(G.LoadedTemplates().set_Item(bV,bY),bY));};G.FakeRootSingle=function(bV){var bW,bX,bY;bV.removeAttribute("ws-template");bW=bV.getAttribute("ws-replace");bW===null?void 0:(bV.removeAttribute("ws-replace"),bX=bV.parentNode,O.Equals(bX,null)?void 0:(bY=self.document.createElement(bV.tagName),bY.setAttribute("ws-replace",bW),bX.replaceChild(bY,bV)));return G.FakeRoot([bV]);};G.FakeRoot=function(bV){var bW,bX,bY;bW=self.document.createElement("div");for(bX=0,bY=bV.length-1;bX<=bY;bX++)bW.appendChild(N.get(bV,bX));return bW;};G.PrepareTemplateStrict=function(bV,bW,bX,bY,bZ){var b0,b1;function b2(b7,b8){var b9,b_,b$,ca,cb,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;function cc(cy){}while(true)switch(b7){case 0:if(b8!==null){b9=b8.nextSibling;if(O.Equals(b8.nodeType,V.TEXT_NODE))bf.convertTextNode(b8);else if(O.Equals(b8.nodeType,V.ELEMENT_NODE))b4(b8);b8=b9;}else return null;break;case 1:cd=bg.string(b8.nodeName,{$:1,$0:3},null).toLowerCase();ce=(b_=cd.indexOf("."),b_===-1?[bV,cd]:[bg.string(cd,null,{$:1,$0:b_-1}),bg.string(cd,{$:1,$0:b_+1},null)]);cf=ce[1];cg=ce[0];if(cg!==""&&!G.LoadedTemplates().ContainsKey(cg))return bf.failNotLoaded(cf);else{if(cg===""&&bZ!=null)bZ.$0(cf);ch=G.LoadedTemplates().get_Item(cg);if(!ch.ContainsKey(cf))return bf.failNotLoaded(cf);else{ci=ch.get_Item(cf);cj=ci.cloneNode(true);ck=new _6.New$3();cl=new X.New$5();cm=b8.attributes;for(cn=0,co=cm.length-1;cn<=co;cn++){cp=cm.item(cn).name.toLowerCase();cl.set_Item(cp,(cq=cm.item(cn).nodeValue,cq===""?cp:cq.toLowerCase()));!ck.Add(cp)?bS.warn("Hole mapped twice",cp):void 0;}for(cr=0,cs=b8.childNodes.length-1;cr<=cs;cr++){ct=b8.childNodes[cr];O.Equals(ct.nodeType,V.ELEMENT_NODE)?!ck.Add(ct.nodeName.toLowerCase())?bS.warn("Hole filled twice",cf):void 0:void 0;}cu=b8.childNodes.length===1&&O.Equals(b8.firstChild.nodeType,V.TEXT_NODE);if(cu){ca=bf.fillTextHole(cj,b8.firstChild.textContent,cf);((function(cy){return function(cz){if(cz!=null)cy(cz.$0);};}((cb=function(cy){return function(cz){return cy.Add(cz);};}(ck),function(cy){return cc(cb(cy));})))(ca));}bf.removeHolesExcept(cj,ck);if(!cu){for(cv=0,cw=b8.childNodes.length-1;cv<=cw;cv++){cx=b8.childNodes[cv];O.Equals(cx.nodeType,V.ELEMENT_NODE)?cx.hasAttributes()?bf.fillInstanceAttrs(cj,cx):b3(cj,cx):void 0;}}bf.mapHoles(cj,cl);bf.fill(cj,b8.parentNode,b8);b8.parentNode.removeChild(b8);return;}}break;}}function b3(b7,b8){var b9,b$,ca;function b_(cb,cc){var cd,ce,cf;if(b$==="title"&&b8.hasChildNodes()){cd=bT.parseHTML(b8.textContent);b8.removeChild(b8.firstChild);for(ce=0,cf=cd.length-1;ce<=cf;ce++)b8.appendChild(N.get(cd,ce));}else null;b4(b8);return bf.fill(b8,cb,cc);}b$=b8.nodeName.toLowerCase();Y.IterSelector(b7,"[ws-attr-holes]",function(cb){var cc,cd,ce,cf,cg;cc=m.SplitChars(cb.getAttribute("ws-attr-holes"),[" "],1);for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=N.get(cc,cd);cb.setAttribute(cf,(cg=new a.RegExp("\\${"+b$+"}","ig"),cb.getAttribute(cf).replace(cg,b8.textContent)));}});ca=b7.querySelector("[ws-hole="+b$+"]");if(O.Equals(ca,null)){b9=b7.querySelector("[ws-replace="+b$+"]");return O.Equals(b9,null)?null:(b_(b9.parentNode,b9),void b9.parentNode.removeChild(b9));}else{while(ca.hasChildNodes())ca.removeChild(ca.lastChild);ca.removeAttribute("ws-hole");return b_(ca,null);}}function b4(b7){if(m.StartsWith(b7.nodeName.toLowerCase(),"ws-"))b6(b7);else{bf.convertAttrs(b7);b5(b7.firstChild);}}function b5(b7){return b2(0,b7);}function b6(b7){return b2(1,b7);}b0=bY==null?G.FakeRoot(bX):bY.$0;b1=(bW==null?"":bW.$0).toLowerCase();G.LoadedTemplateFile(bV).set_Item(b1,b0);N.length(bX)>0?(function(b7){var b8,b9,b_,b$;while(true){b8=b7.querySelector("[ws-template]");if(O.Equals(b8,null)){b9=b7.querySelector("[ws-children-template]");if(O.Equals(b9,null))return null;else{b_=b9.getAttribute("ws-children-template");b9.removeAttribute("ws-children-template");G.PrepareTemplateStrict(bV,{$:1,$0:b_},Y.ChildrenArray(b9),null,null);b7=b7;}}else{b$=b8.getAttribute("ws-template");(G.PrepareSingleTemplate(bV,{$:1,$0:b$},b8))(null);b7=b7;}}}(b0),b5(N.get(bX,0))):void 0;};G.PrepareSingleTemplate=function(bV,bW,bX){var bY,bZ,b0;bY=G.FakeRootSingle(bX);bZ=[bX];b0={$:1,$0:bY};return function(b1){G.PrepareTemplateStrict(bV,bW,bZ,b0,b1);};};G.TextHoleRE=function(){_5.$cctor();return _5.TextHoleRE;};H.NewFromSeq=function(bV){var bW,bX,bY;bW={};bX=q.Get(bV);try{while(bX.MoveNext()){bY=bX.Current();bW[bY[0]]=bY[1];}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}return bW;};I.Id=function(){(I.lastId())[0]++;return"Form"+a.String((I.lastId())[0]);};I.lastId=function(){_9.$cctor();return _9.lastId;};J=t.Var$1=bR.Class({},r,J);J.Create$1=function(bV){return new Z.New(false,P.New({$:2,$0:bV,$1:[]}),bV);};J.Create=function(){return new Z.New(false,P.New({$:2,$0:null,$1:[]}),null);};J.Update=function(bV,bW){J.Set(bV,bW(bV.Get()));};J.Set=function(bV,bW){bV.Set(bW);};L=K.T=bR.Class({GetEnumerator:function(){return new s.New(this,null,function(bV){var bW;bW=bV.s;return bW.$==0?false:(bV.c=bW.$0,bV.s=bW.$1,true);},void 0);},GetEnumerator0:function(){return q.Get(this);}},null,L);L.Empty=new L({$:0});M.Map=function(bV,bW){return bW.$==1?{$:1,$0:bW.$0}:{$:0,$0:bV(bW.$0)};};M.Apply=function(bV,bW){return bV.$==0?bW.$==0?{$:0,$0:bV.$0(bW.$0)}:{$:1,$0:bW.$0}:bW.$==0?{$:1,$0:bV.$0}:{$:1,$0:K.append(bV.$0,bW.$0)};};M.IsFailure=function(bV){return bV.$==1;};M.Append=function(bV,bW,bX){return bW.$==0?bX.$==0?{$:0,$0:bV(bW.$0,bX.$0)}:bX:bX.$==0?bW:{$:1,$0:K.append(bW.$0,bX.$0)};};N.get=function(bV,bW){N.checkBounds(bV,bW);return bV[bW];};N.length=function(bV){return bV.dims===2?bV.length*bV.length:bV.length;};N.checkBounds=function(bV,bW){if(bW<0||bW>=bV.length)e.FailWith("Index was outside the bounds of the array.");};N.set=function(bV,bW,bX){N.checkBounds(bV,bW);bV[bW]=bX;};O.Equals=function(bV,bW){var bX,bY,bZ,b0;if(bV===bW)return true;else{bX=typeof bV;if(bX=="object"){if(bV===null||bV===void 0||bW===null||bW===void 0)return false;else if("Equals"in bV)return bV.Equals(bW);else if(bV instanceof a.Array&&bW instanceof a.Array)return O.arrayEquals(bV,bW);else if(bV instanceof a.Date&&bW instanceof a.Date)return O.dateEquals(bV,bW);else{bY=[true];for(var b1 in bV)if(function(b2){bY[0]=!bV.hasOwnProperty(b2)||bW.hasOwnProperty(b2)&&O.Equals(bV[b2],bW[b2]);return!bY[0];}(b1))break;if(bY[0]){for(var b2 in bW)if(function(b3){bY[0]=!bW.hasOwnProperty(b3)||bV.hasOwnProperty(b3);return!bY[0];}(b2))break;}return bY[0];}}else return bX=="function"&&("$Func"in bV?bV.$Func===bW.$Func&&bV.$Target===bW.$Target:"$Invokes"in bV&&"$Invokes"in bW&&O.arrayEquals(bV.$Invokes,bW.$Invokes));}};O.arrayEquals=function(bV,bW){var bX,bY;if(N.length(bV)===N.length(bW)){bX=true;bY=0;while(bX&&bY<N.length(bV)){!O.Equals(N.get(bV,bY),N.get(bW,bY))?bX=false:void 0;bY=bY+1;}return bX;}else return false;};O.dateEquals=function(bV,bW){return bV.getTime()===bW.getTime();};O.Hash=function(bV){var bW;bW=typeof bV;return bW=="function"?0:bW=="boolean"?bV?1:0:bW=="number"?bV:bW=="string"?O.hashString(bV):bW=="object"?bV==null?0:bV instanceof a.Array?O.hashArray(bV):O.hashObject(bV):0;};O.hashString=function(bV){var bW,bX,bY;if(bV===null)return 0;else{bW=5381;for(bX=0,bY=bV.length-1;bX<=bY;bX++)bW=O.hashMix(bW,bV[bX].charCodeAt());return bW;}};O.hashArray=function(bV){var bW,bX,bY;bW=-34948909;for(bX=0,bY=N.length(bV)-1;bX<=bY;bX++)bW=O.hashMix(bW,O.Hash(N.get(bV,bX)));return bW;};O.hashObject=function(bV){var bW,bX;if("GetHashCode"in bV)return bV.GetHashCode();else{bW=[0];for(var bY in bV)if(function(bZ){bW[0]=O.hashMix(O.hashMix(bW[0],O.hashString(bZ)),O.Hash(bV[bZ]));return false;}(bY))break;return bW[0];}};O.hashMix=function(bV,bW){return(bV<<5)+bV+bW;};O.Compare=function(bV,bW){var bX,bY,bZ,b0,b1,b2;if(bV===bW)return 0;else{bY=typeof bV;switch(bY=="function"?1:bY=="boolean"?2:bY=="number"?2:bY=="string"?2:bY=="object"?3:0){case 0:return typeof bW=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return bV<bW?-1:1;case 3:if(bV===null)bZ=-1;else if(bW===null)bZ=1;else if("CompareTo"in bV)bZ=bV.CompareTo(bW);else if("CompareTo0"in bV)bZ=bV.CompareTo0(bW);else if(bV instanceof a.Array&&bW instanceof a.Array)bZ=O.compareArrays(bV,bW);else if(bV instanceof a.Date&&bW instanceof a.Date)bZ=O.compareDates(bV,bW);else{b0=[0];for(var b3 in bV)if(function(b4){return!bV.hasOwnProperty(b4)?false:!bW.hasOwnProperty(b4)?(b0[0]=1,true):(b0[0]=O.Compare(bV[b4],bW[b4]),b0[0]!==0);}(b3))break;if(b0[0]===0){for(var b4 in bW)if(function(b5){return!bW.hasOwnProperty(b5)?false:!bV.hasOwnProperty(b5)&&(b0[0]=-1,true);}(b4))break;}bZ=b0[0];}return bZ;}}};O.compareArrays=function(bV,bW){var bX,bY;if(N.length(bV)<N.length(bW))return -1;else if(N.length(bV)>N.length(bW))return 1;else{bX=0;bY=0;while(bX===0&&bY<N.length(bV)){bX=O.Compare(N.get(bV,bY),N.get(bW,bY));bY=bY+1;}return bX;}};O.compareDates=function(bV,bW){return O.Compare(bV.getTime(),bW.getTime());};N.ofSeq=function(bV){var bW,bX;if(bV instanceof a.Array)return bV.slice();else if(bV instanceof L)return N.ofList(bV);else{bW=[];bX=q.Get(bV);try{while(bX.MoveNext())bW.push(bX.Current());return bW;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}}};N.ofList=function(bV){var bW,bX;bX=[];bW=bV;while(!(bW.$==0)){bX.push(K.head(bW));bW=K.tail(bW);}return bX;};N.exists=function(bV,bW){var bX,bY,bZ,b0;bX=false;bY=0;b0=N.length(bW);while(!bX&&bY<b0)if(bV(bW[bY]))bX=true;else bY=bY+1;return bX;};N.tryPick=function(bV,bW){var bX,bY,bZ;bX=null;bY=0;while(bY<bW.length&&bX==null){bZ=bV(bW[bY]);bZ!=null&&bZ.$==1?bX=bZ:void 0;bY=bY+1;}return bX;};N.tryFindIndex=function(bV,bW){var bX,bY;bX=null;bY=0;while(bY<bW.length&&bX==null){bV(bW[bY])?bX={$:1,$0:bY}:void 0;bY=bY+1;}return bX;};N.filter=function(bV,bW){var bX,bY,bZ;bX=[];for(bY=0,bZ=bW.length-1;bY<=bZ;bY++)if(bV(bW[bY]))bX.push(bW[bY]);return bX;};N.map=function(bV,bW){var bX,bY,bZ;bX=new a.Array(bW.length);for(bY=0,bZ=bW.length-1;bY<=bZ;bY++)bX[bY]=bV(bW[bY]);return bX;};N.iter=function(bV,bW){var bX,bY;for(bX=0,bY=bW.length-1;bX<=bY;bX++)bV(bW[bX]);};N.foldBack=function(bV,bW,bX){var bY,bZ,b0,b1,b2;bY=bX;b0=bW.length;for(b1=1,b2=b0;b1<=b2;b1++)bY=bV(bW[b0-b1],bY);return bY;};N.pick=function(bV,bW){var bX;bX=N.tryPick(bV,bW);return bX==null?e.FailWith("KeyNotFoundException"):bX.$0;};N.concat=function(bV){return a.Array.prototype.concat.apply([],N.ofSeq(bV));};N.choose=function(bV,bW){var bX,bY,bZ,b0;bX=[];for(bY=0,bZ=bW.length-1;bY<=bZ;bY++){b0=bV(bW[bY]);b0==null?void 0:bX.push(b0.$0);}return bX;};N.create=function(bV,bW){var bX,bY,bZ;bX=new a.Array(bV);for(bY=0,bZ=bV-1;bY<=bZ;bY++)bX[bY]=bW;return bX;};N.init=function(bV,bW){var bX,bY,bZ;bV<0?e.FailWith("Negative size given."):null;bX=new a.Array(bV);for(bY=0,bZ=bV-1;bY<=bZ;bY++)bX[bY]=bW(bY);return bX;};N.forall=function(bV,bW){var bX,bY,bZ,b0;bX=true;bY=0;b0=N.length(bW);while(bX&&bY<b0)if(bV(bW[bY]))bY=bY+1;else bX=false;return bX;};v=t.View=bR.Class({},null,v);P.Map=function(bV,bW){var bX,bY;bX=bW.s;return bX!=null&&bX.$==0?P.New({$:0,$0:bV(bX.$0)}):(bY=P.New({$:3,$0:[],$1:[]}),(P.When(bW,function(bZ){P.MarkDone(bY,bW,bV(bZ));},bY),bY));};P.Map2Unit=function(bV,bW){var bX,bY,bZ;function b0(){var b1,b2,b3;if(!(b1=bZ.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=P.ValueAndForever(bV);b3=P.ValueAndForever(bW);b2!=null&&b2.$==1?b3!=null&&b3.$==1?b2.$0[1]&&b3.$0[1]?P.MarkForever(bZ,null):P.MarkReady(bZ,null):void 0:void 0;}}bX=bV.s;bY=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?P.New({$:0,$0:null}):bW:bY!=null&&bY.$==0?bV:(bZ=P.New({$:3,$0:[],$1:[]}),(P.When(bV,b0,bZ),P.When(bW,b0,bZ),bZ));};P.WhenObsoleteRun=function(bV,bW){var bX;bX=bV.s;bX==null?bW():bX!=null&&bX.$==2?bX.$1.push(bW):bX!=null&&bX.$==3?bX.$1.push(bW):void 0;};P.When=function(bV,bW,bX){var bY;bY=bV.s;bY==null?P.Obsolete(bX):bY!=null&&bY.$==2?(P.EnqueueSafe(bY.$1,bX),bW(bY.$0)):bY!=null&&bY.$==3?(bY.$0.push(bW),P.EnqueueSafe(bY.$1,bX)):bW(bY.$0);};P.MarkDone=function(bV,bW,bX){var bY;if(bY=bW.s,bY!=null&&bY.$==0)P.MarkForever(bV,bX);else P.MarkReady(bV,bX);};P.Map2=function(bV,bW,bX){var bY,bZ,b0;function b1(b2){var b3,b4,b5;if(!(b3=b0.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=P.ValueAndForever(bW);b5=P.ValueAndForever(bX);b4!=null&&b4.$==1?b5!=null&&b5.$==1?b4.$0[1]&&b5.$0[1]?P.MarkForever(b0,bV(b4.$0[0],b5.$0[0])):P.MarkReady(b0,bV(b4.$0[0],b5.$0[0])):void 0:void 0;}}bY=bW.s;bZ=bX.s;return bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?P.New({$:0,$0:bV(bY.$0,bZ.$0)}):P.Map2Opt1(bV,bY.$0,bX):bZ!=null&&bZ.$==0?P.Map2Opt2(bV,bZ.$0,bW):(b0=P.New({$:3,$0:[],$1:[]}),(P.When(bW,b1,b0),P.When(bX,b1,b0),b0));};P.ValueAndForever=function(bV){var bW;bW=bV.s;return bW!=null&&bW.$==0?{$:1,$0:[bW.$0,true]}:bW!=null&&bW.$==2?{$:1,$0:[bW.$0,false]}:null;};P.MarkForever=function(bV,bW){var bX,bY,bZ,b0;bX=bV.s;if(bX!=null&&bX.$==3){bV.s={$:0,$0:bW};bY=bX.$0;for(bZ=0,b0=N.length(bY)-1;bZ<=b0;bZ++)(N.get(bY,bZ))(bW);}else void 0;};P.MarkReady=function(bV,bW){var bX,bY,bZ,b0;bX=bV.s;if(bX!=null&&bX.$==3){bV.s={$:2,$0:bW,$1:bX.$1};bY=bX.$0;for(bZ=0,b0=N.length(bY)-1;bZ<=b0;bZ++)(N.get(bY,bZ))(bW);}else void 0;};P.EnqueueSafe=function(bV,bW){var bX,bY,bZ,b0;bV.push(bW);if(bV.length%20===0){bX=bV.slice(0);bv.Clear(bV);for(bY=0,bZ=N.length(bX)-1;bY<=bZ;bY++){b0=N.get(bX,bY);typeof b0=="object"?function(b1){if(b1.s)bV.push(b1);}(b0):function(b1){bV.push(b1);}(b0);}}else void 0;};P.Map2Opt1=function(bV,bW,bX){return P.Map(function(bY){return bV(bW,bY);},bX);};P.Map2Opt2=function(bV,bW,bX){return P.Map(function(bY){return bV(bY,bW);},bX);};P.SnapshotOn=function(bV,bW){var bX;function bY(bZ){var b0,b1,b2;if(!(b0=bX.s,b0!=null&&b0.$==0||b0!=null&&b0.$==2)){b1=P.ValueAndForever(bV);b2=P.ValueAndForever(bW);b1!=null&&b1.$==1?b2!=null&&b2.$==1?b1.$0[1]||b2.$0[1]?P.MarkForever(bX,b2.$0[0]):P.MarkReady(bX,b2.$0[0]):void 0:void 0;}}bX=P.New({$:3,$0:[],$1:[]});P.When(bV,bY,bX);P.WhenReady(bW,bY);return bX;};P.WhenObsolete=function(bV,bW){var bX;bX=bV.s;bX==null?P.Obsolete(bW):bX!=null&&bX.$==2?P.EnqueueSafe(bX.$1,bW):bX!=null&&bX.$==3?P.EnqueueSafe(bX.$1,bW):void 0;};P.Join=function(bV){var bW;bW=P.New({$:3,$0:[],$1:[]});P.When(bV,function(bX){var bY;bY=bX();P.When(bY,function(bZ){var b0,b1;if((b0=bY.s,b0!=null&&b0.$==0)&&(b1=bV.s,b1!=null&&b1.$==0))P.MarkForever(bW,bZ);else P.MarkReady(bW,bZ);},bW);},bW);return bW;};P.WhenRun=function(bV,bW,bX){var bY;bY=bV.s;bY==null?bX():bY!=null&&bY.$==2?(bY.$1.push(bX),bW(bY.$0)):bY!=null&&bY.$==3?(bY.$0.push(bW),bY.$1.push(bX)):bW(bY.$0);};P.WhenReady=function(bV,bW){var bX,bY;bY=bV.s;switch(bY!=null&&bY.$==2?(bX=bY.$0,0):bY==null?1:bY!=null&&bY.$==3?2:(bX=bY.$0,0)){case 0:bW(bX);break;case 1:null;break;case 2:bY.$0.push(bW);break;}};P.Copy=function(bV){var bW,bX,bY;bW=bV.s;return bW==null?bV:bW!=null&&bW.$==2?(bX=P.New({$:2,$0:bW.$0,$1:[]}),(P.WhenObsolete(bV,bX),bX)):bW!=null&&bW.$==3?(bY=P.New({$:3,$0:[],$1:[]}),(P.When(bV,function(bZ){P.MarkDone(bY,bV,bZ);},bY),bY)):bV;};Q=t.AttrProxy=bR.Class({},null,Q);Q.Create=function(bV,bW){return _1.Static(function(bX){Y.SetAttr(bX,bV,bW);});};Q.Append=function(bV,bW){return _1.AppendTree(bV,bW);};Q.Concat=function(bV){var bW;bW=_3.ofSeqNonCopying(bV);return _3.TreeReduce(_1.EmptyAttr(),Q.Append,bW);};R=g.ErrorMessage=bR.Class({},r,R);R.New=bR.Ctor(function(bV,bW){r.New.call(this);this.id=bV;this.message=bW;},R);K.filter=function(bV,bW){return K.ofSeq(k.filter(bV,bW));};K.ofArray=function(bV){var bW,bX,bY;bW=L.Empty;for(bX=N.length(bV)-1,bY=0;bX>=bY;bX--)bW=new L({$:1,$0:N.get(bV,bX),$1:bW});return bW;};K.ofSeq=function(bV){var bW,bX,bY,bZ,b0,b1;if(bV instanceof L)return bV;else if(bV instanceof a.Array)return K.ofArray(bV);else{bW=q.Get(bV);try{bY=bW.MoveNext();if(!bY)bX=L.Empty;else{b0=new L({$:1});bZ=b0;while(bY){bZ.$0=bW.Current();bW.MoveNext()?bZ=(b1=new L({$:1}),bZ.$1=b1,b1):bY=false;}bZ.$1=L.Empty;bX=b0;}return bX;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}}};K.append=function(bV,bW){var bX,bY,bZ,b0,b1;if(bV.$==0)return bW;else if(bW.$==0)return bV;else{b0=new L({$:1});bX=b0;bY=bV;bZ=true;while(bZ){bX.$0=bY.$0;bY=bY.$1;bY.$==0?bZ=false:bX=(b1=new L({$:1}),bX.$1=b1,b1);}bX.$1=bW;return b0;}};K.head=function(bV){return bV.$==1?bV.$0:K.listEmpty();};K.tail=function(bV){return bV.$==1?bV.$1:K.listEmpty();};K.listEmpty=function(){return e.FailWith("The input list was empty.");};S=t.Var=bR.Class({},r,S);S.New=bR.Ctor(function(){r.New.call(this);},S);T.SubmitterValidate=function(bV){var bW;return Q.Append(_2.Handler("click",function(){return function(){return bV.Trigger();};}),(bW=v.Const("disabled"),_2.DynamicPred("disabled",v.Map(M.IsFailure,bV.input),bW)));};X=W.Dictionary=bR.Class({set_Item:function(bV,bW){this.set(bV,bW);},ContainsKey:function(bV){var bW,bX;bW=this;bX=this.data[this.hash(bV)];return bX==null?false:N.exists(function(bY){return bW.equals.apply(null,[(e.KeyValue(bY))[0],bV]);},bX);},TryGetValue:function(bV,bW){var bX,bY,bZ;bX=this;bY=this.data[this.hash(bV)];return bY==null?false:(bZ=N.tryPick(function(b0){var b1;b1=e.KeyValue(b0);return bX.equals.apply(null,[b1[0],bV])?{$:1,$0:b1[1]}:null;},bY),bZ!=null&&bZ.$==1&&(bW.set(bZ.$0),true));},Remove:function(bV){return this.remove(bV);},get_Keys:function(){return new bh.New(this);},set:function(bV,bW){var bX,bY,bZ,b0;bX=this;bY=this.hash(bV);bZ=this.data[bY];bZ==null?(this.count=this.count+1,this.data[bY]=new a.Array({K:bV,V:bW})):(b0=N.tryFindIndex(function(b1){return bX.equals.apply(null,[(e.KeyValue(b1))[0],bV]);},bZ),b0==null?(this.count=this.count+1,bZ.push({K:bV,V:bW})):bZ[b0.$0]={K:bV,V:bW});},remove:function(bV){var bW,bX,bY,bZ;bW=this;bX=this.hash(bV);bY=this.data[bX];return bY==null?false:(bZ=N.filter(function(b0){return!bW.equals.apply(null,[(e.KeyValue(b0))[0],bV]);},bY),N.length(bZ)<bY.length&&(this.count=this.count-1,this.data[bX]=bZ,true));},get_Item:function(bV){return this.get(bV);},get:function(bV){var bW,bX;bW=this;bX=this.data[this.hash(bV)];return bX==null?be.notPresent():N.pick(function(bY){var bZ;bZ=e.KeyValue(bY);return bW.equals.apply(null,[bZ[0],bV])?{$:1,$0:bZ[1]}:null;},bX);},GetEnumerator:function(){return q.Get0(this);},GetEnumerator0:function(){return q.Get0(N.concat(j.GetFieldValues(this.data)));}},r,X);X.New$5=bR.Ctor(function(){X.New$6.call(this,[],O.Equals,O.Hash);},X);X.New$6=bR.Ctor(function(bV,bW,bX){var bY,bZ;r.New.call(this);this.equals=bW;this.hash=bX;this.count=0;this.data=[];bY=q.Get(bV);try{while(bY.MoveNext()){bZ=bY.Current();this.set(bZ.K,bZ.V);}}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}},X);Y.Doc=function(){_8.$cctor();return _8.Doc;};Y.SetAttr=function(bV,bW,bX){bV.setAttribute(bW,bX);};Y.CreateText=function(bV){return Y.Doc().createTextNode(bV);};Y.ChildrenArray=function(bV){var bW,bX,bY;bW=[];for(bX=0,bY=bV.childNodes.length-1;bX<=bY;bX++)bW.push(bV.childNodes[bX]);return bW;};Y.CreateElement=function(bV){return Y.Doc().createElement(bV);};Y.IterSelector=function(bV,bW,bX){var bY,bZ,b0;bY=bV.querySelectorAll(bW);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)bX(bY[bZ]);};Y.RemoveAttr=function(bV,bW){bV.removeAttribute(bW);};Y.InsertAt=function(bV,bW,bX){var bY;if(!(bX.parentNode===bV&&bW===(bY=bX.nextSibling,O.Equals(bY,null)?null:bY)))bV.insertBefore(bX,bW);};Y.RemoveNode=function(bV,bW){if(bW.parentNode===bV)bV.removeChild(bW);};Z=t.ConcreteVar=bR.Class({get_Id:function(){return"uinref"+a.String(this.id);},get_View:function(){return this.view;},Set:function(bV){if(this.isConst)(function(bW){return bW("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bW){bS.log(bW);}));else{P.Obsolete(this.snap);this.current=bV;this.snap=P.New({$:2,$0:bV,$1:[]});}},UpdateMaybe:function(bV){var bW;bW=bV(this.Get());bW!=null&&bW.$==1?this.Set(bW.$0):void 0;},Get:function(){return this.current;}},S,Z);Z.New=bR.Ctor(function(bV,bW,bX){var bY;bY=this;S.New.call(this);this.isConst=bV;this.current=bX;this.snap=bW;this.view=function(){return bY.snap;};this.id=$.Int();},Z);P.Obsolete=function(bV){var bW,bX,bY,bZ,b0;bX=bV.s;if(bX==null||(bX!=null&&bX.$==2?(bW=bX.$1,false):bX!=null&&bX.$==3?(bW=bX.$1,false):true))void 0;else{bV.s=null;for(bY=0,bZ=N.length(bW)-1;bY<=bZ;bY++){b0=N.get(bW,bY);typeof b0=="object"?function(b1){P.Obsolete(b1);}(b0):b0();}}};P.New=function(bV){return{s:bV};};_0.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_0.UpdateEmbedNode=function(bV,bW){bV.Current=bW;bV.Dirty=true;};_0.LinkElement=function(bV,bW){_0.InsertDoc(bV,bW,null);};_0.InsertDoc=function(bV,bW,bX){var bY;return bW!=null&&bW.$==1?_0.InsertNode(bV,bW.$0.El,bX):bW!=null&&bW.$==2?(bY=bW.$0,(bY.Dirty=false,_0.InsertDoc(bV,bY.Current,bX))):bW==null?bX:bW!=null&&bW.$==4?_0.InsertNode(bV,bW.$0.Text,bX):bW!=null&&bW.$==5?_0.InsertNode(bV,bW.$0,bX):bW!=null&&bW.$==6?N.foldBack(function(bZ,b0){return bZ==null||bZ.constructor===bc?_0.InsertDoc(bV,bZ,b0):_0.InsertNode(bV,bZ,b0);},bW.$0.Els,bX):_0.InsertDoc(bV,bW.$0,_0.InsertDoc(bV,bW.$1,bX));};_0.CreateRunState=function(bV,bW){return bq.New(br.get_Empty(),_0.CreateElemNode(bV,_1.EmptyAttr(),bW));};_0.PerformAnimatedUpdate=function(bV,bW,bX){var bY;return bi.get_UseAnimations()?(bY=null,bz.Delay(function(){var bZ,b0,b1;bZ=br.FindAll(bX);b0=_0.ComputeChangeAnim(bW,bZ);b1=_0.ComputeEnterAnim(bW,bZ);return bz.Bind(bi.Play(bi.Append(b0,_0.ComputeExitAnim(bW,bZ))),function(){return bz.Bind(_0.SyncElemNodesNextFrame(bV,bW),function(){return bz.Bind(bi.Play(b1),function(){bW.PreviousNodes=bZ;return bz.Return(null);});});});})):_0.SyncElemNodesNextFrame(bV,bW);};_0.PerformSyncUpdate=function(bV,bW,bX){var bY;bY=br.FindAll(bX);_0.SyncElemNode(bV,bW.Top);bW.PreviousNodes=bY;};_0.CreateElemNode=function(bV,bW,bX){var bY;_0.LinkElement(bV,bX);bY=_1.Insert(bV,bW);return ba.New(bY,bX,null,bV,$.Int(),bR.GetOptional(bY.OnAfterRender));};_0.InsertNode=function(bV,bW,bX){Y.InsertAt(bV,bX,bW);return bW;};_0.SyncElemNodesNextFrame=function(bV,bW){function bX(bY){a.requestAnimationFrame(function(){_0.SyncElemNode(bV,bW.Top);bY();});}return bj.BatchUpdatesEnabled()?bz.FromContinuations(function(bY,bZ,b0){return bX.apply(null,[bY,bZ,b0]);}):(_0.SyncElemNode(bV,bW.Top),bz.Return(null));};_0.ComputeExitAnim=function(bV,bW){return bi.Concat(N.map(function(bX){return _1.GetExitAnim(bX.Attr);},br.ToArray(br.Except(bW,br.Filter(function(bX){return _1.HasExitAnim(bX.Attr);},bV.PreviousNodes)))));};_0.ComputeEnterAnim=function(bV,bW){return bi.Concat(N.map(function(bX){return _1.GetEnterAnim(bX.Attr);},br.ToArray(br.Except(bV.PreviousNodes,br.Filter(function(bX){return _1.HasEnterAnim(bX.Attr);},bW)))));};_0.ComputeChangeAnim=function(bV,bW){var bX;function bY(bZ){return _1.HasChangeAnim(bZ.Attr);}bX=function(bZ){return br.Filter(bY,bZ);};return bi.Concat(N.map(function(bZ){return _1.GetChangeAnim(bZ.Attr);},br.ToArray(br.Intersect(bX(bV.PreviousNodes),bX(bW)))));};_0.SyncElemNode=function(bV,bW){!bV?_0.SyncElement(bW):void 0;_0.Sync(bW.Children);_0.AfterRender(bW);};_0.SyncElement=function(bV){function bW(bX){function bY(bZ){var b0,b1;return bZ!=null&&bZ.$==0?bY(bZ.$0)||bY(bZ.$1):bZ!=null&&bZ.$==2?(b0=bZ.$0,b0.Dirty||bY(b0.Current)):bZ!=null&&bZ.$==6&&(b1=bZ.$0,b1.Dirty||N.exists(bW,b1.Holes));}return bY(bX.Children);}_1.Sync(bV.El,bV.Attr);bW(bV)?_0.DoSyncElement(bV):void 0;};_0.Sync=function(bV){var bW,bX;if(bV!=null&&bV.$==1)_0.SyncElemNode(false,bV.$0);else if(bV!=null&&bV.$==2)_0.Sync(bV.$0.Current);else if(bV==null);else if(bV!=null&&bV.$==5);else if(bV!=null&&bV.$==4){bW=bV.$0;bW.Dirty?(bW.Text.nodeValue=bW.Value,bW.Dirty=false):void 0;}else if(bV!=null&&bV.$==6){bX=bV.$0;N.iter(function(bY){_0.SyncElemNode(false,bY);},bX.Holes);N.iter(function(bY){_1.Sync(bY[0],bY[1]);},bX.Attrs);_0.AfterRender(bX);}else{_0.Sync(bV.$0);_0.Sync(bV.$1);}};_0.AfterRender=function(bV){var bW;bW=bR.GetOptional(bV.Render);bW!=null&&bW.$==1?(bW.$0(bV.El),bR.SetOptional(bV,"Render",null)):void 0;};_0.DoSyncElement=function(bV){var bW,bX,bY;function bZ(b0,b1){var b2,b3;return b0!=null&&b0.$==1?b0.$0.El:b0!=null&&b0.$==2?(b2=b0.$0,b2.Dirty?(b2.Dirty=false,_0.InsertDoc(bW,b2.Current,b1)):bZ(b2.Current,b1)):b0==null?b1:b0!=null&&b0.$==4?b0.$0.Text:b0!=null&&b0.$==5?b0.$0:b0!=null&&b0.$==6?(b3=b0.$0,(b3.Dirty?b3.Dirty=false:void 0,N.foldBack(function(b4,b5){return b4==null||b4.constructor===bc?bZ(b4,b5):b4;},b3.Els,b1))):bZ(b0.$0,bZ(b0.$1,b1));}bW=bV.El;bJ.Iter((bX=bV.El,function(b0){Y.RemoveNode(bX,b0);}),bJ.Except(bJ.DocChildren(bV),bJ.Children(bV.El,bR.GetOptional(bV.Delimiters))));bZ(bV.Children,(bY=bR.GetOptional(bV.Delimiters),bY!=null&&bY.$==1?bY.$0[1]:null));};_1.Static=function(bV){return new Q({$:3,$0:bV});};_1.AppendTree=function(bV,bW){var bX;return bV===null?bW:bW===null?bV:(bX=new Q({$:2,$0:bV,$1:bW}),(_1.SetFlags(bX,_1.Flags(bV)|_1.Flags(bW)),bX));};_1.Dynamic=function(bV,bW){return new Q({$:1,$0:new bw.New(bV,bW)});};_1.SetFlags=function(bV,bW){bV.flags=bW;};_1.Flags=function(bV){return bV!==null&&bV.hasOwnProperty("flags")?bV.flags:0;};_1.Updates=function(bV){return _3.MapTreeReduce(function(bW){return bW.NChanged();},v.Const(),v.Map2Unit,bV.DynNodes);};_1.EmptyAttr=function(){bx.$cctor();return bx.EmptyAttr;};_1.Insert=function(bV,bW){var bX,bY,bZ;function b0(b1){if(!(b1===null))if(b1!=null&&b1.$==1)bX.push(b1.$0);else if(b1!=null&&b1.$==2){b0(b1.$0);b0(b1.$1);}else if(b1!=null&&b1.$==3)b1.$0(bV);else if(b1!=null&&b1.$==4)bY.push(b1.$0);}bX=[];bY=[];b0(bW);bZ=bX.slice(0);return bn.New(bV,_1.Flags(bW),bZ,bY.length===0?null:{$:1,$0:function(b1){k.iter(function(b2){b2(b1);},bY);}});};_1.HasExitAnim=function(bV){var bW;bW=2;return(bV.DynFlags&bW)===bW;};_1.GetExitAnim=function(bV){return _1.GetAnim(bV,function(bW,bX){return bW.NGetExitAnim(bX);});};_1.HasEnterAnim=function(bV){var bW;bW=1;return(bV.DynFlags&bW)===bW;};_1.GetEnterAnim=function(bV){return _1.GetAnim(bV,function(bW,bX){return bW.NGetEnterAnim(bX);});};_1.HasChangeAnim=function(bV){var bW;bW=4;return(bV.DynFlags&bW)===bW;};_1.GetChangeAnim=function(bV){return _1.GetAnim(bV,function(bW,bX){return bW.NGetChangeAnim(bX);});};_1.GetAnim=function(bV,bW){return bi.Concat(N.map(function(bX){return bW(bX,bV.DynElem);},bV.DynNodes));};_1.Sync=function(bV,bW){N.iter(function(bX){bX.NSync(bV);},bW.DynNodes);};_2.Value=function(bV){function bW(bX){return{$:1,$0:bX};}return _2.CustomValue(bV,a.id,function(bX){return bW(a.id(bX));});};_2.CustomValue=function(bV,bW,bX){return _2.CustomVar(bV,function(bY,bZ){bY.value=bW(bZ);},function(bY){return bX(bY.value);});};_2.DynamicProp=function(bV,bW){return _1.Dynamic(bW,function(bX){return function(bY){bX[bV]=bY;};});};_2.DynamicPred=function(bV,bW,bX){function bY(bZ,b0){return b0[0]?Y.SetAttr(bZ,bV,b0[1]):Y.RemoveAttr(bZ,bV);}return _1.Dynamic(v.Map2(function(bZ,b0){return[bZ,b0];},bW,bX),function(bZ){return function(b0){return bY(bZ,b0);};});};_2.Handler=function(bV,bW){return _1.Static(function(bX){bX.addEventListener(bV,function(bY){return(bW(bX))(bY);},false);});};_2.CustomVar=function(bV,bW,bX){function bY(b0,b1){return bV.UpdateMaybe(function(b2){var b3,b4;b3=bX(b0);return b3!=null&&b3.$==1&&(!O.Equals(b3.$0,b2)&&(b4=[b3,b3.$0],true))?b4[0]:null;});}function bZ(b0,b1){var b2,b3;b2=bX(b0);return b2!=null&&b2.$==1&&(O.Equals(b2.$0,b1)&&(b3=b2.$0,true))?null:bW(b0,b1);}return Q.Concat([_2.Handler("change",function(b0){return function(b1){return bY(b0,b1);};}),_2.Handler("input",function(b0){return function(b1){return bY(b0,b1);};}),_2.Handler("keypress",function(b0){return function(b1){return bY(b0,b1);};}),_2.DynamicCustom(function(b0){return function(b1){return bZ(b0,b1);};},bV.get_View())]);};_2.DynamicCustom=function(bV,bW){return _1.Dynamic(bW,bV);};_3.ofSeqNonCopying=function(bV){var bW,bX;if(bV instanceof a.Array)return bV;else if(bV instanceof L)return N.ofList(bV);else if(bV===null)return[];else{bW=[];bX=q.Get(bV);try{while(bX.MoveNext())bW.push(bX.Current());return bW;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}}};_3.TreeReduce=function(bV,bW,bX){var bY;function bZ(b0,b1){var b2,b3;return b1<=0?bV:b1===1&&(b0>=0&&b0<bY)?N.get(bX,b0):(b3=b1/2>>0,bW(bZ(b0,b3),bZ(b0+b3,b1-b3)));}bY=N.length(bX);return bZ(0,bY);};_3.MapTreeReduce=function(bV,bW,bX,bY){var bZ;function b0(b1,b2){var b3,b4;return b2<=0?bW:b2===1&&(b1>=0&&b1<bZ)?bV(N.get(bY,b1)):(b4=b2/2>>0,bX(b0(b1,b4),b0(b1+b4,b2-b4)));}bZ=N.length(bY);return b0(0,bZ);};_3.mapInPlace=function(bV,bW){var bX,bY;for(bX=0,bY=bW.length-1;bX<=bY;bX++)bW[bX]=bV(bW[bX]);return bW;};_4=W.List=bR.Class({GetEnumerator:function(){return q.Get(this);},GetEnumerator0:function(){return q.Get0(this);}},null,_4);_5.$cctor=function(){_5.$cctor=a.ignore;_5.LoadedTemplates=new X.New$5();_5.LocalTemplatesLoaded=false;_5.TextHoleRE="\\${([^}]+)}";};_6=W.HashSet=bR.Class({Add:function(bV){return this.add(bV);},Contains:function(bV){var bW;bW=this.data[this.hash(bV)];return bW==null?false:this.arrContains(bV,bW);},add:function(bV){var bW,bX;bW=this.hash(bV);bX=this.data[bW];return bX==null?(this.data[bW]=[bV],this.count=this.count+1,true):this.arrContains(bV,bX)?false:(bX.push(bV),this.count=this.count+1,true);},arrContains:function(bV,bW){var bX,bY,bZ,b0;bX=true;bY=0;b0=bW.length;while(bX&&bY<b0)if(this.equals.apply(null,[bW[bY],bV]))bX=false;else bY=bY+1;return!bX;},ExceptWith:function(bV){var bW;bW=q.Get(bV);try{while(bW.MoveNext())this.Remove(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bV){var bW,bX,bY,bZ;bW=0;bX=bB.concat(this.data);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)N.set(bV,bY,bX[bY]);},IntersectWith:function(bV){var bW,bX,bY,bZ,b0;bW=new _6.New$4(bV,this.equals,this.hash);bX=bB.concat(this.data);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=bX[bY];!bW.Contains(b0)?this.Remove(b0):void 0;}},Remove:function(bV){var bW;bW=this.data[this.hash(bV)];return bW==null?false:this.arrRemove(bV,bW)&&(this.count=this.count-1,true);},arrRemove:function(bV,bW){var bX,bY,bZ,b0;bX=true;bY=0;b0=bW.length;while(bX&&bY<b0)if(this.equals.apply(null,[bW[bY],bV])){bW.splice.apply(bW,[bY,1]);bX=false;}else bY=bY+1;return!bX;},GetEnumerator:function(){return q.Get(bB.concat(this.data));},GetEnumerator0:function(){return q.Get(bB.concat(this.data));}},r,_6);_6.New$3=bR.Ctor(function(){_6.New$4.call(this,[],O.Equals,O.Hash);},_6);_6.New$4=bR.Ctor(function(bV,bW,bX){var bY;r.New.call(this);this.equals=bW;this.hash=bX;this.data=[];this.count=0;bY=q.Get(bV);try{while(bY.MoveNext())this.add(bY.Current());}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}},_6);_6.New$2=bR.Ctor(function(bV){_6.New$4.call(this,bV,O.Equals,O.Hash);},_6);_8.$cctor=function(){_8.$cctor=a.ignore;_8.Doc=self.document;};_9.$cctor=function(){var bV;_9.$cctor=a.ignore;_9.lastId=[0];_9.Int=(bV=[0],function(){bV[0]++;return bV[0];});};$.Int=function(){$.set_counter($.counter()+1);return $.counter();};$.set_counter=function(bV){bu.$cctor();bu.counter=bV;};$.counter=function(){bu.$cctor();return bu.counter;};ba=t.DocElemNode=bR.Class({Equals:function(bV){return this.ElKey===bV.ElKey;},GetHashCode:function(){return this.ElKey;}},null,ba);ba.New=function(bV,bW,bX,bY,bZ,b0){var b1;return new ba((b1={Attr:bV,Children:bW,El:bY,ElKey:bZ},(bR.SetOptional(b1,"Delimiters",bX),bR.SetOptional(b1,"Render",b0),b1)));};bd=t.Elt=bR.Class({},u,bd);bd.New=function(bV,bW,bX){var bY,bZ;bY=_0.CreateElemNode(bV,bW,bX.docNode);bZ=bo.Create(bX.updates);return new bd.New$1({$:1,$0:bY},v.Map2Unit(_1.Updates(bY.Attr),bZ.v),bV,bZ);};bd.New$1=bR.Ctor(function(bV,bW,bX,bY){u.New.call(this,bV,bW);this.docNode$1=bV;this.updates$1=bW;this.elt=bX;this.rvUpdates=bY;},bd);be.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bf.convertTextNode=function(bV){var bW,bX,bY,bZ,b0,b1;bW=null;bX=0;bZ=bV.textContent;b0=new a.RegExp(G.TextHoleRE(),"g");while(bW=b0.exec(bZ),bW!==null){bV.parentNode.insertBefore(self.document.createTextNode(bg.string(bZ,{$:1,$0:bX},{$:1,$0:b0.lastIndex-N.get(bW,0).length-1})),bV);bX=b0.lastIndex;b1=self.document.createElement("span");b1.setAttribute("ws-replace",N.get(bW,1).toLowerCase());bV.parentNode.insertBefore(b1,bV);}b0.lastIndex=0;bV.textContent=bg.string(bZ,{$:1,$0:bX},null);};bf.failNotLoaded=function(bV){bS.warn("Instantiating non-loaded template",bV);};bf.fillTextHole=function(bV,bW,bX){var bY;bY=bV.querySelector("[ws-replace]");return O.Equals(bY,null)?(bS.warn("Filling non-existent text hole",bX),null):(bY.parentNode.replaceChild(new a.Text(bW),bY),{$:1,$0:bY.getAttribute("ws-replace")});};bf.removeHolesExcept=function(bV,bW){function bX(bY){Y.IterSelector(bV,"["+bY+"]",function(bZ){if(!bW.Contains(bZ.getAttribute(bY)))bZ.removeAttribute(bY);});}bX("ws-attr");bX("ws-onafterrender");bX("ws-var");Y.IterSelector(bV,"[ws-hole]",function(bY){if(!bW.Contains(bY.getAttribute("ws-hole"))){bY.removeAttribute("ws-hole");while(bY.hasChildNodes())bY.removeChild(bY.lastChild);}});Y.IterSelector(bV,"[ws-replace]",function(bY){if(!bW.Contains(bY.getAttribute("ws-replace")))bY.parentNode.removeChild(bY);});Y.IterSelector(bV,"[ws-on]",function(bY){bY.setAttribute("ws-on",m.concat(" ",N.filter(function(bZ){return bW.Contains(N.get(m.SplitChars(bZ,[":"],1),1));},m.SplitChars(bY.getAttribute("ws-on"),[" "],1))));});Y.IterSelector(bV,"[ws-attr-holes]",function(bY){var bZ,b0,b1,b2,b3;bZ=m.SplitChars(bY.getAttribute("ws-attr-holes"),[" "],1);for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=N.get(bZ,b0);bY.setAttribute(b2,(b3=new a.RegExp(G.TextHoleRE(),"g"),bY.getAttribute(b2).replace(b3,function(b4,b5){return bW.Contains(b5)?b4:"";})));}});};bf.fillInstanceAttrs=function(bV,bW){var bX,bY,bZ,b0,b1;bf.convertAttrs(bW);bX=bW.nodeName.toLowerCase();bY=bV.querySelector("[ws-attr="+bX+"]");if(O.Equals(bY,null))bS.warn("Filling non-existent attr hole",bX);else{bY.removeAttribute("ws-attr");for(bZ=0,b0=bW.attributes.length-1;bZ<=b0;bZ++){b1=bW.attributes.item(bZ);b1.name==="class"&&bY.hasAttribute("class")?bY.setAttribute("class",bY.getAttribute("class")+" "+b1.nodeValue):bY.setAttribute(b1.name,b1.nodeValue);}}};bf.mapHoles=function(bV,bW){function bX(bY){Y.IterSelector(bV,"["+bY+"]",function(bZ){var b0,b1;b0=(b1=null,[bW.TryGetValue(bZ.getAttribute(bY).toLowerCase(),{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);b0[0]?bZ.setAttribute(bY,b0[1]):void 0;});}bX("ws-hole");bX("ws-replace");bX("ws-attr");bX("ws-onafterrender");bX("ws-var");Y.IterSelector(bV,"[ws-on]",function(bY){bY.setAttribute("ws-on",m.concat(" ",N.map(function(bZ){var b0,b1,b2;b0=m.SplitChars(bZ,[":"],1);b1=(b2=null,[bW.TryGetValue(N.get(b0,1),{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);return b1[0]?N.get(b0,0)+":"+b1[1]:bZ;},m.SplitChars(bY.getAttribute("ws-on"),[" "],1))));});Y.IterSelector(bV,"[ws-attr-holes]",function(bY){var bZ,b0,b1;bZ=m.SplitChars(bY.getAttribute("ws-attr-holes"),[" "],1);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)(function(){var b2;function b3(b4,b5){var b6;b6=e.KeyValue(b5);return b4.replace(new a.RegExp("\\${"+b6[0]+"}","ig"),"${"+b6[1]+"}");}b2=N.get(bZ,b0);return bY.setAttribute(b2,(((bR.Curried3(k.fold))(b3))(bY.getAttribute(b2)))(bW));}());});};bf.fill=function(bV,bW,bX){while(true)if(bV.hasChildNodes())bX=bW.insertBefore(bV.lastChild,bX);else return null;};bf.convertAttrs=function(bV){var bX,bY,bZ,b0,b1,b2,b3,b4;function bW(b5){var b6;b6=bV.getAttribute(b5);b6===null?void 0:bV.setAttribute(b5,b6.toLowerCase());}bX=bV.attributes;bY=[];bZ=[];b0=[];for(b1=0,b2=bX.length-1;b1<=b2;b1++){b3=bX.item(b1);m.StartsWith(b3.nodeName,"ws-on")&&b3.nodeName!=="ws-onafterrender"&&b3.nodeName!=="ws-on"?(bY.push(b3.nodeName),bZ.push(bg.string(b3.nodeName,{$:1,$0:"ws-on".length},null)+":"+b3.nodeValue.toLowerCase())):!m.StartsWith(b3.nodeName,"ws-")&&(new a.RegExp(G.TextHoleRE())).test(b3.nodeValue)?(b3.nodeValue=(b4=new a.RegExp(G.TextHoleRE(),"g"),b3.nodeValue.replace(b4,function(b5,b6){return"${"+b6.toLowerCase()+"}";})),b0.push(b3.nodeName)):void 0;}!(bZ.length==0)?bV.setAttribute("ws-on",m.concat(" ",bZ)):void 0;!(b0.length==0)?bV.setAttribute("ws-attr-holes",m.concat(" ",b0)):void 0;bW("ws-hole");bW("ws-replace");bW("ws-attr");bW("ws-onafterrender");bW("ws-var");N.iter(function(b5){bV.removeAttribute(b5);},bY);};bg.string=function(bV,bW,bX){return bW==null?bX!=null&&bX.$==1?bV.slice(0,bX.$0+1):"":bX==null?bV.slice(bW.$0):bV.slice(bW.$0,bX.$0+1);};k.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};bh=W.KeyCollection=bR.Class({GetEnumerator$1:function(){return q.Get(k.map(function(bV){return bV.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,bh);bh.New=bR.Ctor(function(bV){r.New.call(this);this.d=bV;},bh);bi.get_UseAnimations=function(){return bs.UseAnimations();};bi.Play=function(bV){var bW;bW=null;return bz.Delay(function(){return bz.Bind(bi.Run(a.ignore,bs.Actions(bV)),function(){bs.Finalize(bV);return bz.Return(null);});});};bi.Append=function(bV,bW){return{$:0,$0:bA.Append(bV.$0,bW.$0)};};bi.Run=function(bV,bW){var bX;function bY(bZ){function b0(b1,b2){var b3;b3=b2-b1;bW.Compute(b3);bV();return b3<=bX?void a.requestAnimationFrame(function(b4){b0(b1,b4);}):bZ();}a.requestAnimationFrame(function(b1){b0(b1,b1);});}bX=bW.Duration;return bX===0?bz.Zero():bz.FromContinuations(function(bZ,b0,b1){return bY.apply(null,[bZ,b0,b1]);});};bi.Concat=function(bV){return{$:0,$0:bA.Concat(k.map(bs.List,bV))};};bi.get_Empty=function(){return{$:0,$0:bA.Empty()};};bj.BatchUpdatesEnabled=function(){bt.$cctor();return bt.BatchUpdatesEnabled;};bk.StartProcessor=function(bV){var bW;function bX(){var bY;bY=null;return bz.Delay(function(){return bz.Bind(bV,function(){var bZ;bZ=bW[0];return bZ===1?(bW[0]=0,bz.Zero()):bZ===2?(bW[0]=1,bX()):bz.Zero();});});}bW=[0];return function(){var bY;bY=bW[0];bY===0?(bW[0]=1,bz.Start(bX(),null)):bY===1?bW[0]=2:void 0;};};bl.Int=function(){_9.$cctor();return _9.Int;};A["List`1.Swap"]=function(bV,bW,bX){var bY;bY=N.get(bV,bW);N.set(bV,bW,N.get(bV,bX));N.set(bV,bX,bY);};bn.New=function(bV,bW,bX,bY){var bZ;bZ={DynElem:bV,DynFlags:bW,DynNodes:bX};bR.SetOptional(bZ,"OnAfterRender",bY);return bZ;};bo=t.Updates=bR.Class({},null,bo);bo.Create=function(bV){var bW;bW=null;bW=bo.New(bV,null,function(){var bX;bX=bW.s;return bX===null?(bX=P.Copy(bW.c()),bW.s=bX,P.WhenObsoleteRun(bX,function(){bW.s=null;}),bX):bX;});return bW;};bo.New=function(bV,bW,bX){return new bo({c:bV,s:bW,v:bX});};bq.New=function(bV,bW){return{PreviousNodes:bV,Top:bW};};br.get_Empty=function(){return{$:0,$0:new _6.New$3()};};br.FindAll=function(bV){var bW;function bX(bZ){if(bZ!=null&&bZ.$==0){bX(bZ.$0);bX(bZ.$1);}else if(bZ!=null&&bZ.$==1)bY(bZ.$0);else if(bZ!=null&&bZ.$==2)bX(bZ.$0.Current);else if(bZ!=null&&bZ.$==6)N.iter(bY,bZ.$0.Holes);}function bY(bZ){bW.push(bZ);bX(bZ.Children);}bW=[];bX(bV);return{$:0,$0:new _6.New$2(bW)};};br.Filter=function(bV,bW){return{$:0,$0:bG.Filter(bV,bW.$0)};};br.Except=function(bV,bW){return{$:0,$0:bG.Except(bV.$0,bW.$0)};};br.ToArray=function(bV){return bG.ToArray(bV.$0);};br.Intersect=function(bV,bW){return{$:0,$0:bG.Intersect(bV.$0,bW.$0)};};bs.UseAnimations=function(){by.$cctor();return by.UseAnimations;};bs.Actions=function(bV){return bs.ConcatActions(N.choose(function(bW){return bW.$==1?{$:1,$0:bW.$0}:null;},bA.ToArray(bV.$0)));};bs.Finalize=function(bV){N.iter(function(bW){if(bW.$==0)bW.$0();},bA.ToArray(bV.$0));};bs.ConcatActions=function(bV){var bW,bX,bY,bZ;bW=_3.ofSeqNonCopying(bV);bX=N.length(bW);return bX===0?bs.Const():bX===1?N.get(bW,0):(bY=k.max(k.map(function(b0){return b0.Duration;},bW)),(bZ=N.map(function(b0){return bs.Prolong(bY,b0);},bW),bs.Def(bY,function(b0){N.iter(function(b1){b1.Compute(b0);},bZ);})));};bs.List=function(bV){return bV.$0;};bs.Const=function(bV){return bs.Def(0,function(){return bV;});};bs.Def=function(bV,bW){return{Compute:bW,Duration:bV};};bs.Prolong=function(bV,bW){var bX,bY,bZ;bX=bW.Compute;bY=bW.Duration;bZ=bM.Create(function(){return bW.Compute(bW.Duration);});return{Compute:function(b0){return b0>=bY?bZ.f():bX(b0);},Duration:bV};};bt.$cctor=function(){bt.$cctor=a.ignore;bt.BatchUpdatesEnabled=true;};bu.$cctor=function(){bu.$cctor=a.ignore;bu.counter=0;};bv.Clear=function(bV){bV.splice(0,N.length(bV));};bw=t.DynamicAttrNode=bR.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bV){return bi.get_Empty();},NGetEnterAnim:function(bV){return bi.get_Empty();},NGetChangeAnim:function(bV){return bi.get_Empty();},NSync:function(bV){if(this.dirty){(this.push(bV))(this.value);this.dirty=false;}}},r,bw);bw.New=bR.Ctor(function(bV,bW){var bX;bX=this;r.New.call(this);this.push=bW;this.value=void 0;this.dirty=false;this.updates=v.Map(function(bY){bX.value=bY;bX.dirty=true;},bV);},bw);bx.$cctor=function(){bx.$cctor=a.ignore;bx.EmptyAttr=null;};by.$cctor=function(){by.$cctor=a.ignore;by.CubicInOut=bC.Custom(function(bV){var bW;bW=bV*bV;return 3*bW-2*(bW*bV);});by.UseAnimations=true;};bz.Delay=function(bV){return function(bW){try{(bV(null))(bW);}catch(bX){bW.k({$:1,$0:bX});}};};bz.Bind=function(bV,bW){return bz.checkCancel(function(bX){bV(bD.New(function(bY){var bZ;if(bY.$==0){bZ=bY.$0;bz.scheduler().Fork(function(){try{(bW(bZ))(bX);}catch(b0){bX.k({$:1,$0:b0});}});}else bz.scheduler().Fork(function(){bX.k(bY);});},bX.ct));});};bz.Zero=function(){bE.$cctor();return bE.Zero;};bz.Start=function(bV,bW){var bX,bY;bX=(bY=(bz.defCTS())[0],bW==null?bY:bW.$0);bz.scheduler().Fork(function(){if(!bX.c)bV(bD.New(function(bZ){if(bZ.$==1)bz.UncaughtAsyncError(bZ.$0);},bX));});};bz.Return=function(bV){return function(bW){bW.k({$:0,$0:bV});};};bz.checkCancel=function(bV){return function(bW){if(bW.ct.c)bz.cancel(bW);else bV(bW);};};bz.defCTS=function(){bE.$cctor();return bE.defCTS;};bz.UncaughtAsyncError=function(bV){bS.log("WebSharper: Uncaught asynchronous exception",bV);};bz.FromContinuations=function(bV){return function(bW){var bX;function bY(bZ){if(bX[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bX[0]=true;bz.scheduler().Fork(bZ);}}bX=[false];bV(function(bZ){bY(function(){bW.k({$:0,$0:bZ});});},function(bZ){bY(function(){bW.k({$:1,$0:bZ});});},function(bZ){bY(function(){bW.k({$:2,$0:bZ});});});};};bz.cancel=function(bV){bV.k({$:2,$0:new bL.New(bV.ct)});};bz.scheduler=function(){bE.$cctor();return bE.scheduler;};bA.Append=function(bV,bW){return bV.$==0?bW:bW.$==0?bV:{$:2,$0:bV,$1:bW};};bA.ToArray=function(bV){var bW;function bX(bY){if(bY.$==1)bW.push(bY.$0);else if(bY.$==2){bX(bY.$0);bX(bY.$1);}else if(bY.$==3)N.iter(function(bZ){bW.push(bZ);},bY.$0);}bW=[];bX(bV);return bW.slice(0);};bA.Concat=function(bV){var bW;bW=_3.ofSeqNonCopying(bV);return _3.TreeReduce(bA.Empty(),bA.Append,bW);};bA.Empty=function(){bN.$cctor();return bN.Empty;};bB.concat=function(bV){var bW,bX;bW=[];for(var bY in bV)bW.push.apply(bW,bV[bY]);return bW;};bC=t.Easing=bR.Class({},r,bC);bC.Custom=function(bV){return new bC.New(bV);};bC.New=bR.Ctor(function(bV){r.New.call(this);this.transformTime=bV;},bC);bD.New=function(bV,bW){return{k:bV,ct:bW};};bE.$cctor=function(){bE.$cctor=a.ignore;bE.noneCT=bF.New(false,[]);bE.scheduler=new bH.New();bE.defCTS=[new bI.New()];bE.Zero=bz.Return();bE.GetCT=function(bV){bV.k({$:0,$0:bV.ct});};};bF.New=function(bV,bW){return{c:bV,r:bW};};bG.Filter=function(bV,bW){return new _6.New$2(N.filter(bV,bG.ToArray(bW)));};bG.Except=function(bV,bW){var bX;bX=new _6.New$2(bG.ToArray(bW));bX.ExceptWith(bG.ToArray(bV));return bX;};bG.ToArray=function(bV){var bW;bW=N.create(bV.get_Count(),void 0);bV.CopyTo(bW);return bW;};bG.Intersect=function(bV,bW){var bX;bX=new _6.New$2(bG.ToArray(bV));bX.IntersectWith(bG.ToArray(bW));return bX;};bH=bz.Scheduler=bR.Class({Fork:function(bV){var bW;bW=this;this.robin.push(bV);this.idle?(this.idle=false,a.setTimeout(function(){bW.tick();},0)):void 0;},tick:function(){var bV,bW,bX;bW=this;bX=bU.now();bV=true;while(bV)if(this.robin.length===0){this.idle=true;bV=false;}else{(this.robin.shift())();bU.now()-bX>40?(a.setTimeout(function(){bW.tick();},0),bV=false):void 0;}}},r,bH);bH.New=bR.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},bH);bI=d.CancellationTokenSource=bR.Class({},r,bI);bI.New=bR.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bI);bJ.Children=function(bV,bW){var bX,bY,bZ;if(bW!=null&&bW.$==1){bZ=[];bX=bW.$0[0].nextSibling;while(bX!==bW.$0[1]){bZ.push(bX);bX=bX.nextSibling;}return{$:0,$0:bZ};}else return{$:0,$0:N.init(bV.childNodes.length,(bY=bV.childNodes,function(b0){return bY[b0];}))};};bJ.Except=function(bV,bW){var bX;bX=bV.$0;return{$:0,$0:N.filter(function(bY){return N.forall(function(bZ){return!(bY===bZ);},bX);},bW.$0)};};bJ.Iter=function(bV,bW){N.iter(bV,bW.$0);};bJ.DocChildren=function(bV){var bW;function bX(bY){if(bY!=null&&bY.$==2)bX(bY.$0.Current);else if(bY!=null&&bY.$==1)bW.push(bY.$0.El);else if(bY==null);else if(bY!=null&&bY.$==5)bW.push(bY.$0);else if(bY!=null&&bY.$==4)bW.push(bY.$0.Text);else if(bY!=null&&bY.$==6)N.iter(function(bZ){if(bZ==null||bZ.constructor===bc)bX(bZ);else bW.push(bZ);},bY.$0.Els);else{bX(bY.$0);bX(bY.$1);}}bW=[];bX(bV.Children);return{$:0,$0:_3.ofSeqNonCopying(bW)};};bL=d.OperationCanceledException=bR.Class({},bK,bL);bL.New=bR.Ctor(function(bV){bL.New$1.call(this,"The operation was canceled.",null,bV);},bL);bL.New$1=bR.Ctor(function(bV,bW,bX){this.message=bV;this.inner=bW;bc.setPrototypeOf(this,bL.prototype);this.ct=bX;},bL);bM.Create=function(bV){return bP.New(false,bV,bM.forceLazy);};bM.forceLazy=function(){var bV;bV=this.v();this.c=true;this.v=bV;this.f=bM.cachedLazy;return bV;};bM.cachedLazy=function(){return this.v;};bN.$cctor=function(){bN.$cctor=a.ignore;bN.Empty={$:0};};bP.New=function(bV,bW,bX){return{c:bV,v:bW,f:bX};};bR.OnLoad(function(){c.FinalForm();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
